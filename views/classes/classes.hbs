{{!--
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> --}}
<style>
    .class-item {
        background-color: #A4EBF3;
        border: 2px solid black;
        border-radius: 10px;
        transition: all .3s ease;
    }
    .class-item:hover {
        transform: scale(1.1);
    }

    .card-img-top {
        border-radius: 10px 10px 0 0;
    }

    .btn-container {
        display: flex;
        margin: 10px auto;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
    }

    .btn-container button {
        margin-bottom: 20px;
    }

    .btn-primary {
        margin: 0 1rem;
    }

    .btn-customized {
        min-width: 5rem;
    }


.class-item .hidden{display: none;}

.filterItems-active{
     background-color: #01d28e;
    color:#fff;
}

    
.filterItems {
    margin:20px;
    display:flex;
    flex-wrap: wrap;
   
  }
 
  .filterItems .item{
    margin:10px;
    border-radius: 10px;
    border: solid 2px #01d28e;
    padding:7px;
  }

  @media (max-width: 811px){
      .filterItems .item{
          width: calc(100%);
  }
  }
  

  .filterItems .item:hover{
    background-color: #01d28e;
    color:#fff;
    cursor: pointer;
  }

</style>





<div class="page-wrapper">
    <!-- ============================================================== -->
    <!-- Bread crumb and right sidebar toggle -->
    <!-- ============================================================== -->
    <div class="page-breadcrumb">
        <div class="row align-items-center">
            <div class="col-md-6 col-8 align-self-center">
                <h3 class="page-title mb-0 p-0">Class</h3>
                <div class="d-flex align-items-center">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Class</li>
                        </ol>
                    </nav>
                </div>
            </div>
            <div class="col-md-6 col-4 align-self-center">
                <div class="text-end upgrade-btn">
                    <a href="/classes/insert" class="btn btn-success d-none d-md-inline-block text-white">Add Class</a>
                </div>
            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- End Bread crumb and right sidebar toggle -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Container fluid  -->
    <!-- ============================================================== -->
    <div class="container-fluid">
        <!-- ============================================================== -->
        <!-- Start Page Content -->
        <!-- ============================================================== -->
        <div class="row">
            <!-- column -->
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-body">
                        <h2 class="card-title">Classes</h2>
                        <div class="filterItems">
                            <span class="item filterItems-active" name = "0">All</span>
                            <span class="item" name = "1"> 10-19 lessons</span>
                            <span class="item" name = "2">20-29 lessons</span>
                            <span class="item" name = "3">30-39 lessons</span>
                            <span class="item" name = "4"> >40 lessons</span>



                        </div>


                        <div class="table-responsive" style="overflow: hidden;">
                            <table class="table user-table">

                                <div class="row row-cols-1 row-cols-md-3 g-4 ">
                                    {{#each classes}}
                                    <div class="col  class__item" name = '{{this._numberOfLesson}}'>
                                        <div>


                                            <div class="card h-100 class-item" name = '{{this._numberOfLesson}}' >
                                                <img src={{this.[Course._image]}} class="card-img-top" alt="...">
                                                <div class="card-body">
                                                    <h5 class="card-title">{{this.[Course._name]}}</h5>
                                                    <p class="card-text">Class: {{this._className}}</p>
                                                    <p class="card-text">Period: {{this._startDate}} - {{this._endDate}}
                                                    </p>
                                                    <input type="text" value="{{this._startDate}}" class="startDate" hidden>
                                                    <input type="text" value="{{this._endDate}}" class="endDate" hidden>
                                                    <p class="card-text">Teacher: {{this.[Teacher.User._firstName]}}
                                                        {{this.[Teacher.User._lastName]}}</p>
                                                    <p class="card-text">Number of lesson: {{this._numberOfLesson}}</p>
                                                    <p class="card-text">Current Number:
                                                        {{this._currentNumber}}/{{this._maxNumber}}</p>
                                                    <p class="card-text status"></p>
                                                </div>
                                                <div class="container btn-container">
                                                    <button
                                                        onclick="window.location.href='/classes/delete/{{this._class_ID}}';"
                                                        class="btn btn-primary btn-customized btn-delete" >Delete</button>
                                                    <button
                                                        onclick="window.location.href='/classes/update/{{this._class_ID}}';"
                                                        class="btn btn-primary btn-customized btn-update"   >Edit</button>
                                                </div>


                                            </div>


                                        </div>




                                    </div>
                                    {{/each}}
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- End PAge Content -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Right sidebar -->
        <!-- ============================================================== -->
        <!-- .right-sidebar -->
        <!-- ============================================================== -->
        <!-- End Right sidebar -->
        <!-- ============================================================== -->


        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">

                {{#paginate pagination type="previous"}}
                <li {{#if disabled}}class="page-item disabled" {{/if}}><a a class="page-link" href="?p={{n}}">Prev</a>
                </li>
                {{/paginate}}
                {{#paginate pagination type="middle" limit="3"}}
                <li {{#if active}}class="page-item active" {{/if}}><a a class="page-link" href="?p={{n}}">{{n}}</a></li>
                {{/paginate}}
                {{#paginate pagination type="next"}}
                <li {{#if disabled}}class="page-item disabled" {{/if}}><a a class="page-link" href="?p={{n}}">Next</a>
                </li>
                {{/paginate}}

            </ul>
        </nav>
    </div>

    <!-- ============================================================== -->
    <!-- End Container fluid  -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- footer -->
    <!-- ============================================================== -->

    <!-- ============================================================== -->
    <!-- End footer -->
    <!-- ============================================================== -->

</div>
{{!--
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script> --}}


<script>

    const Item = document.querySelector(".filterItems");

    const Img = document.querySelectorAll(".class__item");

    window.onload = () => { //loading 
        Item.onclick = (selectedItem) =>{

            if(selectedItem.target.classList.contains("item")){

                Item.querySelector(".filterItems-active").classList.remove("filterItems-active");
                selectedItem.target.classList.add("filterItems-active");

                let namefilter = selectedItem.target.getAttribute("name");
                console.log(namefilter);

                Img.forEach((i) => {
                    let nameItem = i.getAttribute("name");
                    console.log(nameItem);

                    if(namefilter == "4"){
                        if( 40 <= Number(nameItem) ){
                            i.classList.remove("hidden");
                            i.classList.add("showing");
                        }
                        else{
                            i.classList.add("hidden");
                            i.classList.remove("showing");
                        } 
                    }
                    else{
                        if(( Number(namefilter) *10 <= Number(nameItem) && Number(nameItem) < Number(namefilter) *10 + 10) 
                    || namefilter == "0"){
                        console.log("true");
                        i.classList.remove("hidden");
                        i.classList.add("showing");
                    }
                    else{
                        console.log("false");
                        i.classList.add("hidden");
                        i.classList.remove("showing");
                        
                    }

                    }

                    

                });

            }

        }

        const I=document.querySelectorAll('.class__item')
        I.forEach((i)=>{
            const startDate= new Date(i.querySelector('.startDate').value);
            const endDate= new Date(i.querySelector('.endDate').value);
            const currentDate=new Date()

            console.log(currentDate)
            console.log(startDate)
            console.log(endDate)

            if (currentDate < startDate)
               {
                   i.querySelector('.status').innerHTML="Status: Upcoming"
               }
            else if (currentDate >= startDate && currentDate <= endDate)
            {
                i.querySelector('.status').innerHTML="Status: Starting"
                i.querySelector('.btn-delete').disabled=true
            }
            else if (currentDate > endDate)
            {
                i.querySelector('.status').innerHTML="Status: Completed"
                i.querySelector('.btn-delete').disabled=true
                i.querySelector('.btn-update').disabled=true
            }
        })
    } 
    



</script>
